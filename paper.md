---
title: 'spiro: An R package for analyzing data from cardiopulmonary exercise testing'
tags:
  - R
  - exercise science
authors:
  - name: Simon Nolte
    orcid: 0000-0003-1643-1860
    affiliation: 1
    corresponding: true
affiliations:
 - name: Institute of Movement and Neurosciences, German Sport University Cologne, Cologne, Germany
   index: 1
date: 21 January 2023
bibliography: paper.bib
---

# Summary

Measuring gas exchange during physical exercise is a common procedure in sports science and medicine. It allows to assess the functional limit of the cardiovascular system, evaluate the success of training interventions, and diagnose cardio-respiratory diseases. The measuring devices of cardiopulmonary exercise testing --- so-called metabolic carts --- output their data in different formats. Moreover, measured breath-by-breath data is inherently noisy and requires post-processing. The `spiro` package standardizes the import and processing of raw data from different metabolic carts.

# Statement of need

Data from cardiopulmonary exercise testing can be processed with different methods [@robergs2010]. Different processing strategies influence key parameters calculated from the measurements, such as the maximum oxygen uptake [@martin-rincon2019]. This can in turn bias the evaluation of clinical conditions and intervention studies [@johnson1998; @martin-rincon2020]. The `spiro` package provides easy tools to compare and standardize processing methods for cardiopulmonary exercise testing.

In face of the 'replication crisis' in science, calls for more transparent research practices have reached the sports and exercise science community [@caldwell2020]. Transparent research in exercise science requires the sharing of analysis data and code [@borg2020]. In the field of exercise physiology, the `spiro` package now provides the open-source infrastructure to generate analysis code for cardiopulmonary exercise testing. When shared, this ultimately allows researcher to reproduce study results.

The `spiro` package allows to process large amounts of data sets in considerably short time. Having accumulated large data sets from cardiopulmonary exercise testing, researchers can identify physiological patterns using techniques from machine or deep learning [@zignoli2019]. Together with packages for functional programming (e.g. `purrr` [@henry2020]) the `spiro` package can pre-process data before applying such advanced analysis algorithms.

# Features

## Import & Processing

The `spiro` package in its current version 0.1.2 can import files from Cortex, Cosmed, Vyntus, and ZAN devices. The `spiro()` function provides a unified interface for automated import and processing. This includes the retrieval of participant meta data and automated guessing of the exercise protocol. This information can be changed by the helper functions `add_bodymass()` and `add_protocol()`. The `add_heartrate()` function allows to synchronize external heart rate data files.

## Summarizing

Two options for data summary are available: `spiro_summary()` calculates mean parameters over a defined time span at the end of each load step. This is a common procedure when evaluating graded incremental exercise tests. `spiro_max()` can calculate maximum parameters, such as the maximum oxygen uptake, which is often assessed during tests with ramp-like exercise protocols. The function offers different methods for data filtering, such as moving time averages, moving breath averages, and digital filters.

![Example Wasserman 9-Panel-Plot generated by `spiro_plot()`.\label{fig:example}](Fig1.png){width="90%" align="center"}

## Visualization

Users can generate a Wasserman 9-Panel-Plot using `spiro_plot()` (see the example in \autoref{fig:example}). The function allows to extract and reorder single panels of the plot and supports different data filtering methods.

# Acknowledgements

The following persons contributed to this package by providing raw data files, reviewing code and/or suggesting features: Daniel Appelhans, James Hunter, Virgile Lecoultre, Sebastian MÃ¼hlenhoff, Manuel Ramon, Oliver Jan Quittmann, Anton Schiffer, Yannick Max Schwarz, Adrian Swoboda, Andreas Wagner.

# References
